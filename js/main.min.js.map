{"version":3,"sources":["main.js"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_callSuper","t","e","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","apply","TypeError","_assertThisInitialized","ReferenceError","Boolean","valueOf","call","Object","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","value","writable","configurable","defineProperty","_setPrototypeOf","_defineProperty","r","_toPropertyKey","enumerable","_classCallCheck","a","n","_defineProperties","length","key","_createClass","i","_toPrimitive","toPrimitive","String","Number","_classPrivateFieldInitSpec","_checkPrivateRedeclaration","set","has","_classPrivateFieldGet","s","get","_assertClassBrand","_classPrivateFieldSet","arguments","nanoid","body","mobilePopup","form","containerWorkouts","querySelector","inputType","inputDistance","inputDuration","inputCadence","inputElevation","sidebar","btnTrash","mapContainerById","document","btnBack","App","this","_mapEvent","_map","_workouts","timeOut","_newWorkout","_hideWorkoutForm","_toggleClimbField","_moveToWorkout","addEventListener","_deleteAllWorkouts","_hideWorkoutFormMobile","navigator","geolocation","getCurrentPosition","_loadMap","alert","_position$coords","position","coords","click","longitude","L","map","setView","latitude","_getLocalStorageData","_showForm","_this","documentElement","scrollWidth","_getPosition","classList","remove","focus","parentElement","toggle","preventDefault","_showPoint","style","display","numbers","num","isFinite","Array","_len2","_key2","every","_classPrivateFieldGet2","latlng","lat","lng","type","distance","duration","areNumbers","cadence","areNumbersPositive","_hideForm","Running","elevation","_displayWorkoutToSidebar","workout","marker","addTo","bindPopup","popup","concat","maxHeight","autoClose","closeOnClick","_addWorkoutsToLocalStorage","openPopup","html","_id","date","toFixed","pace","speed","target","workoutELement","closest","round","temp","Math","climb","setTimeout","insertAdjacentHTML","_this2","find","clearTimeout","item","dataset","id","animate","pan","localStorage","_this3","JSON","parse","localDate","stringify","forEach","work","push","Cycling","workoutIndex","_deleteWorkoutPoint","splice","_clearAll","elements","location","reload","el","add","contains","Workout","clickNumber","Intl","DateTimeFormat","_Workout2","format","Date","_this4","calculatePace","_this5","calculateSpeed","_Workout3","app"],"mappings":"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","file":"main.min.js","sourcesContent":["\"use strict\";\nimport { nanoid } from \"https://cdn.jsdelivr.net/npm/nanoid/nanoid.js\";\n\nconst body = document.body;\nconst mobilePopup = document.querySelector(\".mobile-popup\");\nconst form = document.querySelector(\".form\");\nconst containerWorkouts = document.querySelector(\".workouts\");\nconst inputType = document.querySelector(\".form__input--type\");\nconst inputDistance = document.querySelector(\".form__input--distance\");\nconst inputDuration = document.querySelector(\".form__input--duration\");\nconst inputCadence = document.querySelector(\".form__input--temp\");\nconst inputElevation = document.querySelector(\".form__input--climb\");\nconst sidebar = document.querySelector(\".sidebar\");\nconst btnTrash = document.querySelector(\".btn--trash\");\nconst mapContainerById = document.querySelector(\"#map\");\nconst btnBack = document.querySelector(\".btn-back\");\n\nclass App {\n  #mapEvent;\n  #map;\n  #workouts = [];\n\n  constructor() {\n    this.click = 0;\n    this.timeOut = 0;\n    this._getPosition();\n    form.addEventListener(\"submit\", this._newWorkout.bind(this));\n    sidebar.addEventListener(\"click\", this._hideWorkoutForm.bind(this));\n    inputType.addEventListener(\"change\", this._toggleClimbField.bind(this));\n    containerWorkouts.addEventListener(\"click\", this._moveToWorkout.bind(this));\n    this._getLocalStorageData();\n    btnTrash.addEventListener(\"click\", this._deleteAllWorkouts.bind(this));\n    btnBack.addEventListener(\"click\", this._hideWorkoutFormMobile.bind(this));\n  }\n\n  _getPosition() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(this._loadMap.bind(this));\n    } else {\n      alert(\"Ваша геолокация не смогла быть загружена\");\n    }\n  }\n\n  _loadMap(position) {\n    const { latitude, longitude } = position.coords;\n    this.#map = L.map(\"map\").setView([latitude, longitude], 13);\n\n    L.tileLayer(\"https://tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(this.#map);\n    this.#map.on(\"click\", this._showForm.bind(this));\n    this.#workouts.forEach((workout) => this._showPoint(workout));\n  }\n\n  _showForm(e) {\n    if (document.documentElement.scrollWidth <= 719) {\n      mapContainerById.style.display = \"none\";\n      sidebar.style.display = \"flex\";\n      mobilePopup.style.display = \"none\";\n    }\n\n    this.#mapEvent = e;\n    form.classList.remove(\"hidden\");\n    inputDistance.focus();\n  }\n\n  _hideForm() {\n    form.classList.add(\"hidden\");\n  }\n\n  _toggleClimbField() {\n    inputCadence.parentElement.classList.toggle(\"form__row--hidden\");\n    inputElevation.parentElement.classList.toggle(\"form__row--hidden\");\n  }\n\n  _newWorkout(e) {\n    e.preventDefault();\n    const { lat, lng } = this.#mapEvent.latlng;\n    const type = inputType.value;\n    const distance = +inputDistance.value;\n    const duration = +inputDuration.value;\n    let workout;\n\n    const areNumbers = (...numbers) =>\n      numbers.every((num) => Number.isFinite(num));\n    const areNumbersPositive = (...numbers) => numbers.every((num) => num > 0);\n\n    if (type === \"running\") {\n      const cadence = +inputCadence.value;\n      if (\n        !areNumbers(distance, duration, cadence) ||\n        !areNumbersPositive(distance, duration, cadence)\n      )\n        return alert(\"Введите положительное число!\");\n      workout = new Running(distance, duration, [lat, lng], cadence);\n    }\n\n    if (type === \"cycling\") {\n      const elevation = +inputElevation.value;\n      if (\n        !areNumbers(distance, duration, elevation) ||\n        !areNumbersPositive(distance, duration)\n      )\n        return alert(\"Введите положительное число!\");\n      workout = new Cycling(distance, duration, [lat, lng], elevation);\n    }\n    this._showPoint(workout);\n    this.#workouts.push(workout);\n    this._addWorkoutsToLocalStorage.call(this);\n    this._displayWorkoutToSidebar(workout);\n    this._hideForm();\n  }\n  _showPoint(workout) {\n    // CUSTOM ICON OF THE POPUP\n    // const LeafIcon = L.Icon.extend({\n    //   options: {\n    //     iconSize: [64, 64],\n    //     shadowSize: [51, 37],\n    //     iconAnchor: [32, 37],\n    //     shadowAnchor: [16, 37],\n    //     popupAnchor: [0, -30],\n    //   },\n    // });\n    // const icon = new LeafIcon({ iconUrl: './popup-img.png' });\n    inputDistance.value =\n      inputDuration.value =\n      inputCadence.value =\n      inputElevation.value =\n        \"\";\n\n    L.marker(workout.coords)\n      .addTo(this.#map)\n      .bindPopup(\n        L.popup({\n          content: `${workout.type === \"running\" ? \"🏃\" : \"🚵‍♂️\"} ${\n            workout.date\n          }`,\n          maxWidth: 110,\n          maxHeight: 30,\n          autoClose: false,\n          className: `${workout.type}-popup`,\n          closeOnClick: false,\n        })\n      )\n      .openPopup();\n  }\n  _displayWorkoutToSidebar(workout) {\n    const html = `<li class=\"workout workout--running\" data-id=\"${workout._id}\">\n          <h2 class=\"workout__title\">${\n            workout.type === \"running\" ? \"Пробежка\" : \"Велотренировка\"\n          } ${workout.date}</h2>\n          <div class=\"workout__details\">\n            <span class=\"workout__icon\">${\n              workout.type === \"running\" ? \"🏃\" : \"🚵‍♂️\"\n            }</span>\n            <span class=\"workout__value\">${+workout.distance.toFixed(2)}</span>\n            <span class=\"workout__unit\">км</span>\n          </div>\n          <div class=\"workout__details\">\n            <span class=\"workout__icon\">⏱</span>\n            <span class=\"workout__value\">${Math.round(workout.duration)}</span>\n            <span class=\"workout__unit\">мин</span>\n          </div>\n          <div class=\"workout__details\">\n            <span class=\"workout__icon\">📏</span>\n            <span class=\"workout__value\">${\n              workout.type === \"running\"\n                ? `${+workout.pace.toFixed(2)}`\n                : `${+workout.speed.toFixed(2)}`\n            }</span>\n            <span class=\"workout__unit\">${\n              workout.type === \"running\" ? \"мин/км\" : \"км/ч\"\n            }</span>\n          </div>\n          <div class=\"workout__details\">\n            <span class=\"workout__icon\">${\n              workout.type === \"running\" ? \"⏱\" : \"🏔\"\n            }</span>\n            <span class=\"workout__value\">${\n              workout.type === \"running\"\n                ? `${Math.round(workout.temp)}`\n                : `${Math.round(workout.climb)}`\n            }</span>\n            <span class=\"workout__unit\">${\n              workout.type === \"running\" ? \"шаг/мин\" : \"м\"\n            }</span>\n          </div>\n        </li>`;\n    form.insertAdjacentHTML(\"afterend\", html);\n  }\n\n  _moveToWorkout(e) {\n    const workoutELement = e.target.closest(\".workout\");\n    if (!workoutELement) return;\n    this.click++;\n    this.timeOut;\n    if (this.click === 1) {\n      this.timeOut = setTimeout(() => {\n        const workout = this.#workouts.find(\n          (item) => item._id == workoutELement.dataset.id\n        );\n        workout.click();\n        this.#map.setView(workout.coords, 13, {\n          animate: true,\n          pan: {\n            duration: 1,\n          },\n        });\n        this.click = 0;\n      }, 200);\n    } else {\n      this.click = 0;\n      clearTimeout(this.timeOut);\n      this._deleteWorkout.call(this, e);\n    }\n  }\n\n  _addWorkoutsToLocalStorage() {\n    localStorage.setItem(\"workouts\", JSON.stringify(this.#workouts));\n  }\n\n  _getLocalStorageData() {\n    const localDate = JSON.parse(localStorage.getItem(\"workouts\"));\n    if (!localDate) return;\n    localDate.forEach((date) => {\n      if (date.type === \"running\") {\n        this.#workouts.push(\n          new Running(date.distance, date.duration, date.coords, date.temp)\n        );\n      }\n      if (date.type === \"cycling\") {\n        this.#workouts.push(\n          new Cycling(date.distance, date.duration, date.coords, date.climb)\n        );\n      }\n    });\n\n    this.#workouts.forEach((work) => this._displayWorkoutToSidebar(work));\n  }\n\n  _reset() {\n    localStorage.removeItem(\"workouts\");\n  }\n\n  _deleteWorkout(e) {\n    const workoutELement = e.target.closest(\".workout\");\n    if (!workoutELement) return;\n    const workoutIndex = this.#workouts.findIndex(\n      (item) => item._id == workoutELement.dataset.id\n    );\n    this.#workouts.splice(workoutIndex, 1);\n    this._reset();\n    workoutELement.remove();\n    this._addWorkoutsToLocalStorage();\n    location.reload();\n  }\n\n  _deleteWorkoutPoint(workout) {}\n\n  _clearAll(elements) {\n    elements.forEach((el) => el.remove());\n  }\n\n  _hideWorkoutForm(e) {\n    if (document.documentElement.scrollWidth <= 719) return;\n    if (\n      e.target.classList.contains(\"sidebar\") ||\n      e.target.classList.contains(\"workouts\") ||\n      e.target.classList.contains(\"footer__copyright\") ||\n      e.target.classList.contains(\"icon\")\n    ) {\n      form.classList.add(\"hidden\");\n    } else {\n      return;\n    }\n  }\n\n  _hideWorkoutFormMobile(e) {\n    mapContainerById.style.display = \"block\";\n    sidebar.style.display = \"none\";\n    mobilePopup.style.display = \"block\";\n  }\n\n  _deleteAllWorkouts() {\n    this._reset();\n    location.reload();\n  }\n}\n\nclass Workout {\n  _id = nanoid();\n  clickNumber = 0;\n\n  constructor(distance, duration, coords) {\n    this.distance = distance;\n    this.duration = duration;\n    this.coords = coords;\n    this.date = new Intl.DateTimeFormat(\"ru-RU\").format(new Date());\n  }\n\n  click() {\n    this.clickNumber++;\n  }\n}\n\nclass Running extends Workout {\n  type = \"running\";\n  constructor(distance, duration, coords, temp) {\n    super(distance, duration, coords);\n    this.temp = temp;\n    this.calculatePace();\n  }\n  calculatePace() {\n    this.pace = this.duration / this.distance;\n  }\n}\n\nclass Cycling extends Workout {\n  type = \"cycling\";\n  constructor(distance, duration, coords, climb) {\n    super(distance, duration, coords);\n    this.climb = climb;\n    this.calculateSpeed();\n  }\n  calculateSpeed() {\n    this.speed = this.distance / (this.duration / 60);\n  }\n}\n\nconst app = new App();\n"]}